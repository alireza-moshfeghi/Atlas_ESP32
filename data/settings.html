<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="theme-color" content="#818CF8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="assets/icon/flower.png">
  <title>Atlas Panel</title>
  <link rel="stylesheet" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/css/style.css">
</head>

<body class="pt-5">
  <nav class="navbar navbar-expand-sm navbar-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand fs-5 fw-semibold">Atlas Panel</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="status">Status</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="devices">Devices</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="reports">Reports</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="history">History</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="settings">Settings</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="network">Network</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="about">About</a>
          </li>
        </ul>
        <div id="btnBox1" class="d-block d-md-none mb-1">
        </div>
      </div>
      <div id="btnBox2" class="d-none d-md-block">
      </div>
    </div>
  </nav>
  <div class="d-flex justify-content-center flex-wrap gap-3 mt-4 mb-3">
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Set Time</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="hours" class="mb-2 fw-bold">Hours:</label>
          <input type="number" id="hours" class="form-control mb-3" min="0" max="23" placeholder="0-23">
          <label for="minutes" class="mb-2 fw-bold">Minutes:</label>
          <input type="number" id="minutes" class="form-control mb-3" min="0" max="59" placeholder="0-59">
          <label for="seconds" class="mb-2 fw-bold">Seconds:</label>
          <input type="number" id="seconds" class="form-control mb-3" min="0" max="59" placeholder="0-59">
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Set Date</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">

          <label for="year" class="mb-2 fw-bold">Year:</label>
          <input type="number" id="year" class="form-control mb-3" min="2000" max="2300" placeholder="e.g. 2025">

          <label for="month" class="mb-2 fw-bold">Month:</label>
          <input type="number" id="month" class="form-control mb-3" min="1" max="12" placeholder="1-12">

          <label for="day" class="mb-2 fw-bold">Day:</label>
          <input type="number" id="day" class="form-control mb-3" min="1" max="31" placeholder="1-31">

        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Temperature Unit</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="unit" class="mb-2 fw-bold">Configured Temperature Unit:</label>
          <select id="unit" class="form-select w-100">
          </select>
        </div>
        <div class="pt-3 mb-4">
          <span id="zone" class="item-subtitle fs-6 fw-semibold">Used for temperature display</span>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Calendar Type</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="calc" class="mb-2 fw-bold">Selected Calendar Type:</label>
          <select id="calc" class="form-select w-100">
          </select>
        </div>
        <div class="pt-3 mb-4">
          <span class="item-subtitle fs-6 fw-semibold">Calendar for displaying dates</span>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Buzzer Alarm</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="buzzer" class="mb-2 fw-bold">Buzzer Alarm Status:</label>
          <select id="buzzer" class="form-select w-100">
          </select>
        </div>
        <div class="pt-3 mb-4">
          <span class="item-subtitle fs-6 fw-semibold">Buzzer alarm for system faults</span>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Delay Time</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="delay" class="mb-2 fw-bold">Current delay time:</label>
          <select id="delay" class="form-select w-100">
          </select>
        </div>
        <div class="pt-3 mb-4">
          <span class="item-subtitle fs-6 fw-semibold">Delay turning devices on and off</span>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Error Time</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="error" class="mb-2 fw-bold">Current error time:</label>
          <select id="error" class="form-select w-100">
          </select>
        </div>
        <div class="pt-3 mb-4">
          <span class="item-subtitle fs-6 fw-semibold">Devices failure detection time</span>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Ignore Time</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="ignore" class="mb-2 fw-bold">Current ignore time:</label>
          <select id="ignore" class="form-select w-100">
          </select>
        </div>
        <div class="pt-3 mb-4">
          <span class="item-subtitle fs-6 fw-semibold">Sensor error ignoring time</span>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Force Login</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="force" class="mb-2 fw-bold">Force Login Status:</label>
          <select id="force" class="form-select w-100">
          </select>
        </div>
        <div class="pt-3 mb-4">
          <span class="item-subtitle fs-6 fw-semibold">Login required to view the dashboard</span>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Temp Offset</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="tempOffset" class="mb-2 fw-bold">Configured Temp Offset:</label>
          <input id="tempOffset" type="number" class="form-control">
          </select>
        </div>
        <div class="pt-3 mb-4">
          <span class="item-subtitle fs-6 fw-semibold">Temperature Offset for DHT Sensor</span>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-4">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Humidity Offset</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3">
          <label for="rhOffset" class="mb-2 fw-bold">Configured Humidity Offset:</label>
          <input id="rhOffset" type="number" class="form-control">
        </div>
        <div class="pt-3 mb-4">
          <span class="item-subtitle fs-6 fw-semibold">Humidity Offset for DHT Sensor</span>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-3">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Heater Mode</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3 mb-1">
          <label for="heater" class="mb-2 fw-bold">Current heater mode:</label>
          <select id="heater" onchange="changeMode(this)" class="form-select w-100">
          </select>
          <div id="heaterMan" style="" class="mb-5">
          </div>
          <div id="heaterAuto" style="display: none;" class="mb-4">
            <label for="heaterThresh" class="mb-2 mt-2 fw-bold">Set Temperature:</label>
            <input id="heaterThresh" type="number" class="form-control">
          </div>
          <div id="heaterSche" style="display: none;">
            <label for="heaterList" class="mb-2 mt-2 fw-bold">Schedule list:</label>
            <select id="heaterList" class="form-select w-100" multiple>
            </select>
            <div class="d-flex justify-content-center align-items-center gap-2 mt-3">
              <button type="button" class="btn btn-purple" data-bs-toggle='modal' data-bs-target='#scheModal' onclick="device='heater'">Add Schedule</button>
              <button type="button" class="btn btn-outline-secondary" onclick="device='heater'; removeSchedule(this)">Delete Schedule</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-3">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Cooler Mode</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3 mb-1">
          <label for="cooler" class="mb-2 fw-bold">Current cooler mode:</label>
          <select id="cooler" onchange="changeMode(this)" class="form-select w-100">
          </select>
          <div id="coolerMan" style="" class="mb-5">
          </div>
          <div id="coolerAuto" style="display: none;" class="mb-4">
            <label for="coolerThresh" class="mb-2 mt-2 fw-bold">Set Temperature:</label>
            <input id="coolerThresh" type="number" class="form-control">
          </div>
          <div id="coolerSche" style="display: none;">
            <label for="coolerList" class="mb-2 mt-2 fw-bold">Schedule list:</label>
            <select id="coolerList" class="form-select w-100" multiple>
            </select>
            <div class="d-flex justify-content-center align-items-center gap-2 mt-3">
              <button type="button" class="btn btn-purple" data-bs-toggle='modal' data-bs-target='#scheModal' onclick="device='cooler'">Add Schedule</button>
              <button type="button" class="btn btn-outline-secondary" onclick="device='cooler'; removeSchedule(this)">Delete Schedule</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-3">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Fogger Mode</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3 mb-1">
          <label for="fogger" class="mb-2 fw-bold">Current fogger mode:</label>
          <select id="fogger" onchange="changeMode(this)" class="form-select w-100">
          </select>
          <div id="foggerMan" style="" class="mb-5">
          </div>
          <div id="foggerAuto" style="display: none;" class="mb-4">
            <label for="foggerThresh" class="mb-2 mt-2 fw-bold">Set Humidity:</label>
            <input id="foggerThresh" type="number" class="form-control">
          </div>
          <div id="foggerSche" style="display: none;">
            <label for="foggerList" class="mb-2 mt-2 fw-bold">Schedule list:</label>
            <select id="foggerList" class="form-select w-100" multiple>
            </select>
            <div class="d-flex justify-content-center align-items-center gap-2 mt-3">
              <button type="button" class="btn btn-purple" data-bs-toggle='modal' data-bs-target='#scheModal' onclick="device='fogger'">Add Schedule</button>
              <button type="button" class="btn btn-outline-secondary" onclick="device='fogger'; removeSchedule(this)">Delete Schedule</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-3">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Exfan Mode</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3 mb-1">
          <label for="exfan" class="mb-2 fw-bold">Current exfan mode:</label>
          <select id="exfan" onchange="changeMode(this)" class="form-select w-100">
          </select>
          <div id="exfanMan" style="" class="mb-5">
          </div>
          <div id="exfanAuto" style="display: none;" class="mb-4">
            <label for="exfanThresh" class="mb-2 mt-2 fw-bold">Set Humidity:</label>
            <input id="exfanThresh" type="number" class="form-control">
          </div>
          <div id="exfanSche" style="display: none;">
            <label for="exfanList" class="mb-2 mt-2 fw-bold">Schedule list:</label>
            <select id="exfanList" class="form-select w-100" multiple>
            </select>
            <div class="d-flex justify-content-center align-items-center gap-2 mt-3">
              <button type="button" class="btn btn-purple" data-bs-toggle='modal' data-bs-target='#scheModal' onclick="device='exfan'">Add Schedule</button>
              <button type="button" class="btn btn-outline-secondary" onclick="device='exfan'; removeSchedule(this)">Delete Schedule</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-3">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Light Mode</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3 mb-1">
          <label for="light" class="mb-2 fw-bold">Current light mode:</label>
          <select id="light" onchange="changeMode(this)" class="form-select w-100">
          </select>
          <div id="lightMan" style="" class="mb-5">
          </div>
          <div id="lightAuto" style="display: none;" class="mb-4">
            <label for="lightThresh" class="mb-2 mt-2 fw-bold">Set Brightness:</label>
            <input id="lightThresh" type="number" class="form-control">
          </div>
          <div id="lightSche" style="display: none;">
            <label for="lightList" class="mb-2 mt-2 fw-bold">Schedule list:</label>
            <select id="lightList" class="form-select w-100" multiple>
            </select>
            <div class="d-flex justify-content-center align-items-center gap-2 mt-3">
              <button type="button" class="btn btn-purple" data-bs-toggle='modal' data-bs-target='#scheModal' onclick="device='light'">Add Schedule</button>
              <button type="button" class="btn btn-outline-secondary" onclick="device='light'; removeSchedule(this)">Delete Schedule</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-3">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">Pump Mode</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3 mb-1">
          <label for="pump" class="mb-2 fw-bold">Current pump mode:</label>
          <select id="pump" onchange="changeMode(this)" class="form-select w-100">
          </select>
          <div id="pumpMan" style="" class="mb-5">
          </div>
          <div id="pumpAuto" style="display: none;" class="mb-4">
            <label for="pumpThresh" class="mb-2 mt-2 fw-bold">Set Soil Moisture:</label>
            <input id="pumpThresh" type="number" class="form-control">
          </div>
          <div id="pumpSche" style="display: none;">
            <label for="pumpList" class="mb-2 mt-2 fw-bold">Schedule list:</label>
            <select id="pumpList" class="form-select w-100" multiple>
            </select>
            <div class="d-flex justify-content-center align-items-center gap-2 mt-3">
              <button type="button" class="btn btn-purple" data-bs-toggle='modal' data-bs-target='#scheModal' onclick="device='pump'">Add Schedule</button>
              <button type="button" class="btn btn-outline-secondary" onclick="device='pump'; removeSchedule(this)">Delete Schedule</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-11 col-md-4 item rounded-4 pb-3">
      <div class="mt-3 mb-3">
        <span class="fs-5 item-subtitle fw-semibold ps-3 ps-md-4">CO₂ Gen Mode</span>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center h-75 w-100">
        <div class="d-flex flex-column w-100 px-4 px-lg-5 py-3 mb-1">
          <label for="co2gen" class="mb-2 fw-bold">Current CO₂ Generator mode:</label>
          <select id="co2gen" onchange="changeMode(this)" class="form-select w-100">
          </select>
          <div id="co2genMan" style="" class="mb-5">
          </div>
          <div id="co2genAuto" style="display: none;" class="mb-4">
            <label for="co2genThresh" class="mb-2 mt-2 fw-bold">Set CO₂ Level:</label>
            <input id="co2genThresh" type="number" class="form-control">
          </div>
          <div id="co2genSche" style="display: none;">
            <label for="co2genList" class="mb-2 mt-2 fw-bold">Schedule list:</label>
            <select id="co2genList" class="form-select w-100" multiple>
            </select>
            <div class="d-flex justify-content-center align-items-center gap-2 mt-3">
              <button type="button" class="btn btn-purple" data-bs-toggle='modal' data-bs-target='#scheModal' onclick="device='co2gen'">Add Schedule</button>
              <button type="button" class="btn btn-outline-secondary" onclick="device='co2gen'; removeSchedule(this)">Delete Schedule</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-column align-items-center pb-3">
    <hr class="col-11 col-md-9">
    <div class="d-flex gap-2">
      <button type="button" class="btn btn-purple" onclick="saveSettings(this)">Save Changes</button>
      <button type="button" class="btn btn-outline-secondary" onclick="restoreSettings()">Restore Defaults</button>
    </div>
  </div>
  <div class="blank position-fixed">
  </div>
  <div class="center position-fixed py-2 px-3 rounded-4 bg-light shadow">
    <div class="d-flex align-items-center gap-2">
      <div class="spinner-border text-purple me-1" role="status" aria-hidden="true"></div>
      <span id="alert" class="fs-5 fw-semibold">Loading...</span>
    </div>
  </div>
  <div class="modal fade" id="alertModal" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header" style='background-color: var(--bd-color-light);'>
          <h4 id="modal_title" class="modal-title">Modal Heading</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div id="modal_text" class="modal-body mb-3"></div>
        <div class="modal-footer" style='background-color: var(--bd-color-light);'>
          <button type="button" class="btn btn-purple" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="loginModal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header" style='background-color: var(--bd-color-light);'>
          <h4 class="modal-title">Sign in</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class='d-flex flex-column align-items-center py-4'>
          <div class="col-10 col-md-9">
            <div class="alert alert-purple mb-3 mt-0 w-100" role="alert" style="line-height: 0.5; display: none;"
              id="alert_text"></div>
            <input type='text' class='form-control fs-6 w-100 mb-1' id='username' name='username'
              style='border-color: var(--up-color-light);' placeholder='Username' />
            <input type='password' class='form-control fs-6 w-100 mt-2' id='password' name='password'
              style='border-color: var(--up-color-light);' placeholder='Password' />
            <div class='form-check mt-2 w-100'>
              <input type='checkbox' class='form-check-input' id='showPass' onclick='showPassword(this)'
                style='border-color: var(--up-color-light);'>
              <label for='showPass' class='form-check-label fs-6' style='color: var(--bs-secondary-color);'>Show
                Password</label>
            </div>
          </div>
        </div>
        <div class="modal-footer" style='background-color: var(--bd-color-light);'>
          <button id="logBtn" type="button" class="btn btn-purple" onclick='loginBtn(this);'>Login</button>
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="logoutModal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header" style='background-color: var(--bd-color-light);'>
          <h4 class="modal-title">Logout Confirmation</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body mb-3">Are you sure you want to log out? Any unsaved changes may be lost.</div>
        <div class="modal-footer" style='background-color: var(--bd-color-light);'>
          <button type="button" class="btn btn-purple" onclick='logoutBtn(this);'>Yes</button>
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">No</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="scheModal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header" style='background-color: var(--bd-color-light);'>
          <h4 class="modal-title">Add Schedule</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class='d-flex flex-column align-items-center py-4'>
          <div class="col-10 col-md-9">
            <div class="alert alert-purple mb-3 mt-0 w-100" role="alert" style="line-height: 0.5; display: none;"
              id="alert_text"></div>
            <label for="daySelect" class="form-label">Select Day</label>
            <select id="daySelect" class="form-select mb-3">
              <option value="Monday">Monday</option>
              <option value="Tuesday">Tuesday</option>
              <option value="Wednesday">Wednesday</option>
              <option value="Thursday">Thursday</option>
              <option value="Friday">Friday</option>
              <option value="Saturday">Saturday</option>
              <option value="Sunday">Sunday</option>
            </select>
            <label class="form-label">Start Time</label>
            <div class="d-flex gap-2 mb-3">
              <input type="number" id="startHour" class="form-control" min="0" max="23" placeholder="HH">
              <input type="number" id="startMinute" class="form-control" min="0" max="59" placeholder="MM">
              <input type="number" id="startSecond" class="form-control" min="0" max="59" placeholder="SS">
            </div>
            <label class="form-label">End Time</label>
            <div class="d-flex gap-2 mb-3">
              <input type="number" id="endHour" class="form-control" min="0" max="23" placeholder="HH">
              <input type="number" id="endMinute" class="form-control" min="0" max="59" placeholder="MM">
              <input type="number" id="endSecond" class="form-control" min="0" max="59" placeholder="SS">
            </div>
          </div>
        </div>
        <div class="modal-footer" style='background-color: var(--bd-color-light);'>
          <button type="button" class="btn btn-purple" onclick="addSchedule(this)">Save</button>
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <script src="assets/js/jquery-3.7.1.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#loginModal input').keypress(function(e) {
          if (e.which === 13) {
              e.preventDefault();
              loginBtn($("#logBtn"));
          }
      });
    });
    let modes = ["manual", "automat", "schedule"];
    let device = "";
    let hur = 0;
    let min = 0;
    let sec = 0;
    let errorShow = "";
    let ajaxInProgress = false;
    function map(value, in_min, in_max, out_min, out_max) {
      return (value - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
    }
    setTimeout(() => {
      $.ajax({
        url: "/getSettings",
        type: 'POST',
        dataType: 'json',
        data: {
          'sessionID': localStorage.getItem("sessionID")
        },
        success: function (data) {
          if (!data.login && data.forceLogin) {
            window.location.href = '/login';
          }
          if (data.jalali) {
            $("#year").attr("min", "1300");
            $("#year").attr("max", "1600");
          }
          $("#hours").val(data.hours);
          $("#minutes").val(data.minutes);
          $("#seconds").val(data.seconds);
          $("#tempOffset").val(data.tempOffset);
          $("#rhOffset").val(data.rhOffset)
          hur = data.hours;
          min = data.minutes;
          sec = Number(data.seconds) + 1;
          $("#year").val(data.year);
          $("#month").val(data.month);
          $("#day").val(data.day);
          if (data.unit == "centigrade")
            $('#unit').append('<option value="centigrade" selected>Centigrade</option>');
          else
            $('#unit').append('<option value="centigrade">Centigrade</option>');
          if (data.unit == "fahrenheit")
            $('#unit').append('<option value="fahrenheit" selected>Fahrenheit</option>');
          else
            $('#unit').append('<option value="fahrenheit">Fahrenheit</option>');
          if (!data.jalali)
            $('#calc').append('<option value="gregorian" selected>Gregorian</option>');
          else
            $('#calc').append('<option value="gregorian">Gregorian</option>');
          if (data.jalali)
            $('#calc').append('<option value="jalali" selected>Jalali</option>');
          else
            $('#calc').append('<option value="jalali">Jalali</option>');
          if (data.buzzer)
            $('#buzzer').append('<option value="enable" selected>Enable</option>');
          else
            $('#buzzer').append('<option value="enable">Enable</option>');
          if (!data.buzzer)
            $('#buzzer').append('<option value="disable" selected>Disable</option>');
          else
            $('#buzzer').append('<option value="disable">Disable</option>');
          if (data.forceLogin)
            $('#force').append('<option value="enable" selected>Enable</option>');
          else
            $('#force').append('<option value="enable">Enable</option>');
          if (!data.forceLogin)
            $('#force').append('<option value="disable" selected>Disable</option>');
          else
            $('#force').append('<option value="disable">Disable</option>');
          for (let i = 0; i <= 180; i += 10) {
            if (i == data.delay)
              $('#delay').append('<option value="' + i + '" selected>' + i + ' Seconds</option>');
            else
              $('#delay').append('<option value="' + i + '">' + i + ' Seconds</option>');
          }
          for (let i = 900; i <= 10800; i += 900) {
            if (i == data.error)
              $('#error').append('<option value="' + i + '" selected>' + (i / 60) + ' Minutes</option>');
            else
              $('#error').append('<option value="' + i + '">' + (i / 60) + ' Minutes</option>');
          }
          for (let i = 1; i <= 5; i++) {
            if (i == data.ignore)
              $('#ignore').append('<option value="' + i + '" selected>' + i + ' Seconds</option>');
            else
              $('#ignore').append('<option value="' + i + '">' + i + ' Seconds</option>');
          }
          modes.forEach(mode => {
            if (data.heaterMode == mode)
              $('#heater').append('<option value="' + mode.toLowerCase() + '" selected>' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
            else
              $('#heater').append('<option value="' + mode.toLowerCase() + '">' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
          });
          $("#heaterThresh").val(data.heaterThresh);
          $("#heaterList").html(data.heaterList);
          $("#heater").trigger("change");
          modes.forEach(mode => {
            if (data.coolerMode == mode)
              $('#cooler').append('<option value="' + mode.toLowerCase() + '" selected>' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
            else
              $('#cooler').append('<option value="' + mode.toLowerCase() + '">' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
          });
          $("#coolerThresh").val(data.coolerThresh);
          $("#coolerList").html(data.coolerList);
          $("#cooler").trigger("change");
          modes.forEach(mode => {
            if (data.foggerMode == mode)
              $('#fogger').append('<option value="' + mode.toLowerCase() + '" selected>' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
            else
              $('#fogger').append('<option value="' + mode.toLowerCase() + '">' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
          });
          $("#foggerThresh").val(data.foggerThresh);
          $("#foggerList").html(data.foggerList);
          $("#fogger").trigger("change");
          modes.forEach(mode => {
            if (data.exfanMode == mode)
              $('#exfan').append('<option value="' + mode.toLowerCase() + '" selected>' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
            else
              $('#exfan').append('<option value="' + mode.toLowerCase() + '">' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
          });
          $("#exfanThresh").val(data.exfanThresh);
          $("#exfanList").html(data.exfanList);
          $("#exfan").trigger("change");
          modes.forEach(mode => {
            if (data.lightMode == mode)
              $('#light').append('<option value="' + mode.toLowerCase() + '" selected>' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
            else
              $('#light').append('<option value="' + mode.toLowerCase() + '">' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
          });
          $("#lightThresh").val(data.lightThresh);
          $("#lightList").html(data.lightList);
          $("#light").trigger("change");
          modes.forEach(mode => {
            if (data.pumpMode == mode)
              $('#pump').append('<option value="' + mode.toLowerCase() + '" selected>' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
            else
              $('#pump').append('<option value="' + mode.toLowerCase() + '">' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
          });
          $("#pumpThresh").val(data.pumpThresh);
          $("#pumpList").html(data.pumpList);
          $("#pump").trigger("change");
          modes.forEach(mode => {
            if (data.co2genMode == mode)
              $('#co2gen').append('<option value="' + mode.toLowerCase() + '" selected>' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
            else
              $('#co2gen').append('<option value="' + mode.toLowerCase() + '">' + mode.charAt(0).toUpperCase() + mode.slice(1) + '</option>');
          });
          $("#co2genThresh").val(data.co2genThresh);
          $("#co2genList").html(data.co2genList);
          $("#co2gen").trigger("change");
          setTimeout(() => {
            $(".blank").fadeOut(500);
            $(".center").fadeOut(500);
          }, 750);
          setTimeout(() => {
            if (data.errorTitle != "none" && data.errorText != "none" && data.errorText != errorShow) {
              $("#modal_title").text(data.errorTitle);
              $("#modal_text").text(data.errorText);
              var myModalEl = document.getElementById('alertModal');
              var myModal = new bootstrap.Modal(myModalEl);
              myModal.show();
              errorShow = data.errorText;
            }
          }, 1250)
        }, error: function (xhr, status) {
          if (xhr.status == 0) {
            $("#alert").text("Connecting...")
            $(".blank").fadeIn(500);
            $(".center").fadeIn(500);
          }
        }
      });
    }, 0);
    setInterval(() => {
      if (ajaxInProgress) return;
      ajaxInProgress = true;
      $.ajax({
        url: "/getStatus",
        type: 'POST',
        dataType: 'json',
        data: {
          'sessionID': localStorage.getItem("sessionID")
        },
        success: function (data) {
          ajaxInProgress = false;
          if (data.login) {
            $("#btnBox1").html("<button class='btn btn-purple' data-bs-toggle='modal' data-bs-target='#logoutModal'>Log out</button>");
            $("#btnBox2").html("<button class='btn btn-purple' data-bs-toggle='modal' data-bs-target='#logoutModal'>Log out</button>");
          }
          else {
            $("#btnBox1").html("<button class='btn btn-purple' data-bs-toggle='modal' data-bs-target='#loginModal'>Sign in</button>");
            $("#btnBox2").html("<button class='btn btn-purple' data-bs-toggle='modal' data-bs-target='#loginModal'>Sign in</button>");
          }
          if (!data.login && data.forceLogin) {
            window.location.href = '/login';
          }
          setTimeout(() => {
            $(".blank").fadeOut(500);
            $(".center").fadeOut(500);
          }, 750);
          setTimeout(() => {
            if (data.errorTitle != "none" && data.errorText != "none" && data.errorText != errorShow) {
              $("#modal_title").text(data.errorTitle);
              $("#modal_text").text(data.errorText);
              var myModalEl = document.getElementById('alertModal');
              var myModal = new bootstrap.Modal(myModalEl);
              myModal.show();
              errorShow = data.errorText;
            }
          }, 1250)
        }, error: function (xhr, status) {
          ajaxInProgress = false;
          if (xhr.status == 0) {
            $("#alert").text("Connecting...")
            $(".blank").fadeIn(500);
            $(".center").fadeIn(500);
          }
        }
      });
    }, 1000);
    setInterval(() => {
      sec++;
      if (sec == 60) {
        sec = 0;
        min++;
      }
      if (min == 60) {
        min = 0;
        hur++;
      }
      if (hur == 24)
        hur = 0;
      $("#hours").val(hur);
      $("#minutes").val(min);
      $("#seconds").val(sec);
    }, 1000);
    $("#hours").on("input", function () {
      let val = parseInt($(this).val());
      if (!isNaN(val)) hur = val % 24;
    });

    $("#minutes").on("input", function () {
      let val = parseInt($(this).val());
      if (!isNaN(val)) min = val % 60; // محدودیت 0-59
    });

    $("#seconds").on("input", function () {
      let val = parseInt($(this).val());
      if (!isNaN(val)) sec = val % 60; // محدودیت 0-59
    });
  </script>
  <script src="assets/js/script.js"></script>
</body>

</html>